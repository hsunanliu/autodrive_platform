# AutoDrive è…³æœ¬å·¥å…·

æœ¬ç›®éŒ„åŒ…å« AutoDrive å°ˆæ¡ˆçš„å¯¦ç”¨è…³æœ¬å·¥å…·ã€‚

## ğŸ“ ç›®éŒ„çµæ§‹

```
scripts/
â”œâ”€â”€ README.md           # æœ¬æ–‡ä»¶
â”œâ”€â”€ dev/                # é–‹ç™¼å·¥å…·
â”‚   â”œâ”€â”€ run_flutter.sh      # Flutter æ‡‰ç”¨å•Ÿå‹•è…³æœ¬
â”‚   â””â”€â”€ monitor_logs.sh     # æ—¥èªŒç›£æ§è…³æœ¬
â””â”€â”€ ops/                # é‹ç¶­å·¥å…·
    â”œâ”€â”€ cancel_stuck_trip.sh    # å–æ¶ˆå¡ä½çš„è¡Œç¨‹
    â””â”€â”€ report_error.sh         # éŒ¯èª¤å ±å‘Šç”Ÿæˆå™¨
```

## ğŸ› ï¸ é–‹ç™¼å·¥å…· (dev/)

### run_flutter.sh
Flutter æ‡‰ç”¨å•Ÿå‹•è…³æœ¬ï¼Œæ”¯æŒå¤šç¨®å•Ÿå‹•æ¨¡å¼ã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# é»˜èªå•Ÿå‹•
./scripts/dev/run_flutter.sh

# åœ¨ iOS æ¨¡æ“¬å™¨ä¸Šå•Ÿå‹•
./scripts/dev/run_flutter.sh -d ios

# åœ¨ Android æ¨¡æ“¬å™¨ä¸Šå•Ÿå‹•
./scripts/dev/run_flutter.sh -d android

# å•Ÿå‹•ä¸¦è¨˜éŒ„æ—¥èªŒ
./scripts/dev/run_flutter.sh -l

# æ¸…ç†å¾Œå•Ÿå‹•ä¸¦è¨˜éŒ„æ—¥èªŒ
./scripts/dev/run_flutter.sh -c -l

# åœ¨ç‰¹å®šè¨­å‚™ä¸Šå•Ÿå‹•
./scripts/dev/run_flutter.sh -d "iPhone 16 Plus"
```

**é¸é …ï¼š**
- `-d, --device DEVICE` - æŒ‡å®šè¨­å‚™ (ios, android, æˆ–è¨­å‚™ ID)
- `-l, --log` - å•Ÿç”¨æ—¥èªŒè¨˜éŒ„åˆ°æ–‡ä»¶
- `-c, --clean` - å•Ÿå‹•å‰æ¸…ç†æ§‹å»º
- `-h, --help` - é¡¯ç¤ºå¹«åŠ©ä¿¡æ¯

### monitor_logs.sh
æ—¥èªŒç›£æ§è…³æœ¬ï¼Œæ”¯æŒç›£æ§ä¸åŒé¡å‹çš„æ—¥èªŒã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# ç›£æ§å¾Œç«¯æ—¥èªŒ
./scripts/dev/monitor_logs.sh backend

# ç›£æ§æ”¯ä»˜ç›¸é—œæ—¥èªŒ
./scripts/dev/monitor_logs.sh payment

# ç›£æ§æ‰€æœ‰æ—¥èªŒ
./scripts/dev/monitor_logs.sh all
```

**é¡å‹ï¼š**
- `backend` - ç›£æ§å¾Œç«¯ API æ—¥èªŒ (é»˜èª)
- `payment` - ç›£æ§æ”¯ä»˜ç›¸é—œæ—¥èªŒ
- `all` - ç›£æ§æ‰€æœ‰æœå‹™æ—¥èªŒ

## ğŸ”§ é‹ç¶­å·¥å…· (ops/)

### cancel_stuck_trip.sh
å–æ¶ˆå¡ä½çš„è¡Œç¨‹å·¥å…·ï¼Œç”¨æ–¼è™•ç†ç•°å¸¸ç‹€æ…‹çš„è¡Œç¨‹ã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# æŸ¥çœ‹æ‰€æœ‰é€²è¡Œä¸­çš„è¡Œç¨‹
./scripts/ops/cancel_stuck_trip.sh

# å–æ¶ˆç‰¹å®šè¡Œç¨‹
./scripts/ops/cancel_stuck_trip.sh <trip_id>

# ç¯„ä¾‹
./scripts/ops/cancel_stuck_trip.sh 4
```

**åŠŸèƒ½ï¼š**
- åˆ—å‡ºæ‰€æœ‰é€²è¡Œä¸­çš„è¡Œç¨‹
- é¡¯ç¤ºè¡Œç¨‹è©³ç´°ä¿¡æ¯
- å®‰å…¨å–æ¶ˆå¡ä½çš„è¡Œç¨‹
- è¨˜éŒ„å–æ¶ˆåŸå› 

### report_error.sh
éŒ¯èª¤å ±å‘Šç”Ÿæˆå™¨ï¼Œæ”¶é›†ç³»çµ±ç‹€æ…‹å’Œæ—¥èªŒä¿¡æ¯ã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
./scripts/ops/report_error.sh
```

**ç”Ÿæˆå…§å®¹ï¼š**
- Flutter æ—¥èªŒï¼ˆæœ€å¾Œ 100 è¡Œï¼‰
- å¾Œç«¯æ—¥èªŒï¼ˆæœ€å¾Œ 50 è¡Œï¼‰
- è³‡æ–™åº«ç‹€æ…‹
- å¾Œç«¯å¥åº·ç‹€æ…‹

**è¼¸å‡ºï¼š**
ç”Ÿæˆ `error_report_YYYYMMDD_HHMMSS.txt` æ–‡ä»¶

## ğŸ“ å…¶ä»–è…³æœ¬

### åˆç´„éƒ¨ç½²
åˆç´„ç›¸é—œè…³æœ¬ä½æ–¼ `contracts/` ç›®éŒ„ï¼š
- `contracts/deploy_payment_escrow.sh` - éƒ¨ç½²æ”¯ä»˜è¨—ç®¡åˆç´„
- `contracts/tests/run_tests.sh` - åŸ·è¡Œåˆç´„æ¸¬è©¦

### å¾Œç«¯åˆå§‹åŒ–
å¾Œç«¯ç›¸é—œè…³æœ¬ä½æ–¼ `backend/docker/` ç›®éŒ„ï¼š
- `backend/docker/init-test-db.sh` - åˆå§‹åŒ–æ¸¬è©¦è³‡æ–™åº«

## ğŸš€ å¿«é€Ÿé–‹å§‹

### é–‹ç™¼ç’°å¢ƒå•Ÿå‹•
```bash
# 1. å•Ÿå‹•å¾Œç«¯æœå‹™
docker-compose up -d

# 2. ç›£æ§å¾Œç«¯æ—¥èªŒ
./scripts/dev/monitor_logs.sh backend

# 3. å•Ÿå‹• Flutter æ‡‰ç”¨ï¼ˆæ–°çµ‚ç«¯ï¼‰
./scripts/dev/run_flutter.sh -d ios -l
```

### å•é¡Œæ’æŸ¥
```bash
# 1. ç”ŸæˆéŒ¯èª¤å ±å‘Š
./scripts/ops/report_error.sh

# 2. æŸ¥çœ‹å ±å‘Š
cat error_report_*.txt

# 3. å¦‚æœ‰å¡ä½çš„è¡Œç¨‹ï¼Œå–æ¶ˆå®ƒ
./scripts/ops/cancel_stuck_trip.sh
```

## ğŸ’¡ æç¤º

- æ‰€æœ‰è…³æœ¬éƒ½æ”¯æŒ `-h` æˆ– `--help` åƒæ•¸æŸ¥çœ‹è©³ç´°èªªæ˜
- è…³æœ¬åŸ·è¡Œå‰è«‹ç¢ºä¿åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„
- ä½¿ç”¨ `chmod +x` çµ¦è…³æœ¬æ·»åŠ åŸ·è¡Œæ¬Šé™ï¼ˆå¦‚æœéœ€è¦ï¼‰

## ğŸ¤ è²¢ç»

å¦‚éœ€æ·»åŠ æ–°çš„è…³æœ¬å·¥å…·ï¼š
1. å°‡é–‹ç™¼ç›¸é—œè…³æœ¬æ”¾åœ¨ `dev/` ç›®éŒ„
2. å°‡é‹ç¶­ç›¸é—œè…³æœ¬æ”¾åœ¨ `ops/` ç›®éŒ„
3. æ›´æ–°æœ¬ README æ–‡ä»¶
4. ç¢ºä¿è…³æœ¬æœ‰é©ç•¶çš„éŒ¯èª¤è™•ç†å’Œå¹«åŠ©ä¿¡æ¯

---

æœ€å¾Œæ›´æ–°ï¼š2025-10-21
